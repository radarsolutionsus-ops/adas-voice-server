<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tech Dashboard - ADAS F1RST</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/apple-style.css">
</head>
<body>
  <header class="app-header">
    <div class="app-logo">ADAS F1RST</div>
    <div class="header-center">
      <span class="tech-badge" id="techName">Loading...</span>
    </div>
    <div class="header-actions">
      <button class="btn-logout" id="logoutBtn">
        <span class="icon icon-sm" id="logoutIcon"></span>
        Sign Out
      </button>
    </div>
  </header>

  <main class="app-main">
    <!-- Stats Row -->
    <div class="stats-row">
      <div class="stat-card">
        <div class="stat-value" id="statToday">-</div>
        <div class="stat-label">Today</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="statScheduled">-</div>
        <div class="stat-label">Scheduled</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="statInProgress">-</div>
        <div class="stat-label">In Progress</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="statCompleted">-</div>
        <div class="stat-label">Completed</div>
      </div>
    </div>

    <!-- Today's Jobs -->
    <section class="section">
      <div class="section-header">
        <h2>Today's Jobs</h2>
        <span class="badge" id="todayCount">0</span>
      </div>

      <div class="jobs-list" id="todayJobs">
        <div class="loading-state">
          <div class="spinner"></div>
          <p>Loading jobs...</p>
        </div>
      </div>
    </section>

    <!-- All Jobs -->
    <section class="section">
      <div class="section-header">
        <h2>All Jobs</h2>
        <div class="filter-pills">
          <button class="pill active" data-status="all">All</button>
          <button class="pill" data-status="New">New</button>
          <button class="pill" data-status="Scheduled">Scheduled</button>
          <button class="pill" data-status="In Progress">In Progress</button>
          <button class="pill" data-status="Completed">Completed</button>
        </div>
      </div>

      <!-- Search Bar -->
      <div class="search-bar">
        <span class="icon" id="searchIcon"></span>
        <input type="text" id="searchInput" class="search-input-inline" placeholder="Search RO, vehicle, shop...">
      </div>

      <div class="jobs-list" id="allJobs">
        <!-- Populated by JS -->
      </div>
    </section>
  </main>

  <!-- Job Detail Modal -->
  <div class="modal-overlay" id="jobModal">
    <div class="modal modal-large">
      <div class="modal-header">
        <h3 id="modalTitle">RO #---</h3>
        <button class="modal-close" onclick="closeModal()">
          <span class="icon" id="closeModalIcon"></span>
        </button>
      </div>
      <div class="modal-body">
        <!-- Vehicle Info -->
        <div class="modal-section">
          <h4>Vehicle Information</h4>
          <div class="info-grid">
            <div class="info-item">
              <span class="info-label">Shop</span>
              <span class="info-value" id="modalShop">-</span>
            </div>
            <div class="info-item">
              <span class="info-label">Vehicle</span>
              <span class="info-value" id="modalVehicle">-</span>
            </div>
            <div class="info-item">
              <span class="info-label">VIN</span>
              <span class="info-value mono" id="modalVin">-</span>
            </div>
            <div class="info-item">
              <span class="info-label">Scheduled</span>
              <span class="info-value" id="modalSchedule">-</span>
            </div>
          </div>
        </div>

        <!-- Calibrations -->
        <div class="modal-section">
          <h4>Calibrations Required</h4>
          <div class="calibrations-box" id="modalCalibrations">-</div>
        </div>

        <!-- Documents -->
        <div class="modal-section">
          <h4>Documents</h4>
          <div class="docs-row" id="modalDocuments">
            <!-- Populated by JS -->
          </div>
        </div>

        <!-- DTCs -->
        <div class="modal-section" id="dtcSection" style="display:none;">
          <h4>DTCs</h4>
          <div class="dtc-box" id="modalDtcs">-</div>
        </div>

        <!-- Notes -->
        <div class="modal-section">
          <h4>Notes</h4>
          <div class="notes-box" id="modalNotes">-</div>
        </div>

        <!-- Status Update -->
        <div class="modal-section">
          <h4>Update Status</h4>
          <div class="status-buttons">
            <button class="status-btn" onclick="updateStatus('In Progress')">
              <span class="icon" id="statusWrenchIcon"></span>
              Start Job
            </button>
            <button class="status-btn success" onclick="updateStatus('Completed')">
              <span class="icon" id="statusCheckIcon"></span>
              Mark Complete
            </button>
          </div>
        </div>

        <!-- Add Note -->
        <div class="modal-section">
          <h4>Add Note</h4>
          <div class="add-note-form">
            <textarea id="newNote" class="form-textarea" rows="2" placeholder="Enter note..."></textarea>
            <button class="btn-secondary" onclick="addNote()">
              <span class="icon icon-sm" id="addNoteIcon"></span>
              Add
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="/js/icons.js"></script>
  <script src="/js/auth.js"></script>
  <script src="/js/api.js"></script>
  <script src="/tech/js/tech-common.js"></script>
  <script src="/tech/js/dashboard.js"></script>
</body>
</html>
